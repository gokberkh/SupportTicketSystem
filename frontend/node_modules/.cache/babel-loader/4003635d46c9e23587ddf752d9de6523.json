{"ast":null,"code":"/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.slide.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar clickEvent = require(\"../../events/click\");\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar translator = require(\"../../animation/translator\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\n\nvar EditDecoratorMenuHelperMixin = require(\"./ui.list.edit.decorator_menu_helper\");\n\nvar registerDecorator = require(\"./ui.list.edit.decorator_registry\").register;\n\nvar SwitchableEditDecorator = require(\"./ui.list.edit.decorator.switchable\");\n\nvar fx = require(\"../../animation/fx\");\n\nvar themes = require(\"../themes\");\n\nvar ActionSheet = require(\"../action_sheet\");\n\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\nvar CLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, LIST_EDIT_DECORATOR);\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\nvar SLIDE_MENU_CLASS = \"dx-list-slide-menu\";\nvar SLIDE_MENU_WRAPPER_CLASS = \"dx-list-slide-menu-wrapper\";\nvar SLIDE_MENU_CONTENT_CLASS = \"dx-list-slide-menu-content\";\nvar SLIDE_MENU_BUTTONS_CONTAINER_CLASS = \"dx-list-slide-menu-buttons-container\";\nvar SLIDE_MENU_BUTTONS_CLASS = \"dx-list-slide-menu-buttons\";\nvar SLIDE_MENU_BUTTON_CLASS = \"dx-list-slide-menu-button\";\nvar SLIDE_MENU_BUTTON_MENU_CLASS = \"dx-list-slide-menu-button-menu\";\nvar SLIDE_MENU_BUTTON_DELETE_CLASS = \"dx-list-slide-menu-button-delete\";\nvar SLIDE_MENU_ANIMATION_DURATION = 400;\nvar SLIDE_MENU_ANIMATION_EASING = \"cubic-bezier(0.075, 0.82, 0.165, 1)\";\nregisterDecorator(\"menu\", \"slide\", SwitchableEditDecorator.inherit({\n  _shouldHandleSwipe: true,\n  _init: function () {\n    this.callBase.apply(this, arguments);\n    this._$buttonsContainer = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CONTAINER_CLASS);\n    eventsEngine.on(this._$buttonsContainer, ACTIVE_EVENT_NAME, noop);\n    this._$buttons = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CLASS).appendTo(this._$buttonsContainer);\n\n    this._renderMenu();\n\n    this._renderDeleteButton();\n  },\n  _renderMenu: function () {\n    if (!this._menuEnabled()) {\n      return;\n    }\n\n    var menuItems = this._menuItems();\n\n    if (1 === menuItems.length) {\n      var menuItem = menuItems[0];\n\n      this._renderMenuButton(menuItem.text, function (e) {\n        e.stopPropagation();\n\n        this._fireAction(menuItem);\n      }.bind(this));\n    } else {\n      var $menu = $(\"<div>\").addClass(SLIDE_MENU_CLASS);\n      this._menu = this._list._createComponent($menu, ActionSheet, {\n        showTitle: false,\n        items: menuItems,\n        onItemClick: function (args) {\n          this._fireAction(args.itemData);\n        }.bind(this),\n        integrationOptions: {}\n      });\n      $menu.appendTo(this._list.$element());\n\n      var $menuButton = this._renderMenuButton(messageLocalization.format(\"dxListEditDecorator-more\"), function (e) {\n        e.stopPropagation();\n\n        this._menu.show();\n      }.bind(this));\n\n      this._menu.option(\"target\", $menuButton);\n    }\n  },\n  _renderMenuButton: function (text, action) {\n    var $menuButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_MENU_CLASS).text(text);\n\n    this._$buttons.append($menuButton);\n\n    eventsEngine.on($menuButton, CLICK_EVENT_NAME, action);\n    return $menuButton;\n  },\n  _renderDeleteButton: function () {\n    if (!this._deleteEnabled()) {\n      return;\n    }\n\n    var $deleteButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_DELETE_CLASS).text(themes.isMaterial() ? \"\" : messageLocalization.format(\"dxListEditDecorator-delete\"));\n    eventsEngine.on($deleteButton, CLICK_EVENT_NAME, function (e) {\n      e.stopPropagation();\n\n      this._deleteItem();\n    }.bind(this));\n\n    this._$buttons.append($deleteButton);\n  },\n  _fireAction: function (menuItem) {\n    this._fireMenuAction($(this._cachedNode), menuItem.action);\n\n    this._cancelDeleteReadyItem();\n  },\n  modifyElement: function (config) {\n    this.callBase.apply(this, arguments);\n    var $itemElement = config.$itemElement;\n    $itemElement.addClass(SLIDE_MENU_WRAPPER_CLASS);\n    var $slideMenuContent = $(\"<div>\").addClass(SLIDE_MENU_CONTENT_CLASS);\n    $itemElement.wrapInner($slideMenuContent);\n  },\n  _getDeleteButtonContainer: function () {\n    return this._$buttonsContainer;\n  },\n  handleClick: function (_, e) {\n    if ($(e.target).closest(\".\" + SLIDE_MENU_CONTENT_CLASS).length) {\n      return this.callBase.apply(this, arguments);\n    }\n\n    return false;\n  },\n  _swipeStartHandler: function ($itemElement) {\n    this._enablePositioning($itemElement);\n\n    this._cacheItemData($itemElement);\n\n    this._setPositions(this._getPositions(0));\n  },\n  _swipeUpdateHandler: function ($itemElement, args) {\n    var rtl = this._isRtlEnabled();\n\n    var signCorrection = rtl ? -1 : 1;\n\n    var isItemReadyToDelete = this._isReadyToDelete($itemElement);\n\n    var moveJustStarted = this._getCurrentPositions().content === this._getStartPositions().content;\n\n    if (moveJustStarted && !isItemReadyToDelete && args.offset * signCorrection > 0) {\n      args.cancel = true;\n      return;\n    }\n\n    var offset = this._cachedItemWidth * args.offset;\n    var startOffset = isItemReadyToDelete ? -this._cachedButtonWidth * signCorrection : 0;\n    var correctedOffset = (offset + startOffset) * signCorrection;\n    var percent = correctedOffset < 0 ? Math.abs((offset + startOffset) / this._cachedButtonWidth) : 0;\n\n    this._setPositions(this._getPositions(percent));\n\n    return true;\n  },\n  _getStartPositions: function () {\n    var rtl = this._isRtlEnabled();\n\n    var signCorrection = rtl ? -1 : 1;\n    return {\n      content: 0,\n      buttonsContainer: rtl ? -this._cachedButtonWidth : this._cachedItemWidth,\n      buttons: -this._cachedButtonWidth * signCorrection\n    };\n  },\n  _getPositions: function (percent) {\n    var rtl = this._isRtlEnabled();\n\n    var signCorrection = rtl ? -1 : 1;\n\n    var startPositions = this._getStartPositions();\n\n    return {\n      content: startPositions.content - percent * this._cachedButtonWidth * signCorrection,\n      buttonsContainer: startPositions.buttonsContainer - Math.min(percent, 1) * this._cachedButtonWidth * signCorrection,\n      buttons: startPositions.buttons + Math.min(percent, 1) * this._cachedButtonWidth * signCorrection\n    };\n  },\n  _getCurrentPositions: function () {\n    return {\n      content: translator.locate(this._$cachedContent).left,\n      buttonsContainer: translator.locate(this._$buttonsContainer).left,\n      buttons: translator.locate(this._$buttons).left\n    };\n  },\n  _setPositions: function (positions) {\n    translator.move(this._$cachedContent, {\n      left: positions.content\n    });\n    translator.move(this._$buttonsContainer, {\n      left: positions.buttonsContainer\n    });\n    translator.move(this._$buttons, {\n      left: positions.buttons\n    });\n  },\n  _cacheItemData: function ($itemElement) {\n    if ($itemElement[0] === this._cachedNode) {\n      return;\n    }\n\n    this._$cachedContent = $itemElement.find(\".\" + SLIDE_MENU_CONTENT_CLASS);\n    this._cachedItemWidth = $itemElement.outerWidth();\n    this._cachedButtonWidth = this._cachedButtonWidth || this._$buttons.outerWidth();\n\n    this._$buttonsContainer.width(this._cachedButtonWidth);\n\n    if (this._$cachedContent.length) {\n      this._cachedNode = $itemElement[0];\n    }\n  },\n  _minButtonContainerLeftOffset: function () {\n    return this._cachedItemWidth - this._cachedButtonWidth;\n  },\n  _swipeEndHandler: function ($itemElement, args) {\n    this._cacheItemData($itemElement);\n\n    var signCorrection = this._isRtlEnabled() ? 1 : -1;\n    var offset = this._cachedItemWidth * args.offset;\n    var endedAtReadyToDelete = !this._isReadyToDelete($itemElement) && offset * signCorrection > .2 * this._cachedButtonWidth;\n    var readyToDelete = args.targetOffset === signCorrection && endedAtReadyToDelete;\n\n    this._toggleDeleteReady($itemElement, readyToDelete);\n\n    return true;\n  },\n  _enablePositioning: function ($itemElement) {\n    fx.stop(this._$cachedContent, true);\n    this.callBase.apply(this, arguments);\n\n    this._$buttonsContainer.appendTo($itemElement);\n  },\n  _disablePositioning: function () {\n    this.callBase.apply(this, arguments);\n\n    this._$buttonsContainer.detach();\n  },\n  _animatePrepareDeleteReady: function () {\n    return this._animateToPositions(this._getPositions(1));\n  },\n  _animateForgetDeleteReady: function ($itemElement) {\n    this._cacheItemData($itemElement);\n\n    return this._animateToPositions(this._getPositions(0));\n  },\n  _animateToPositions: function (positions) {\n    var that = this;\n\n    var currentPosition = this._getCurrentPositions();\n\n    var durationTimePart = Math.min(Math.abs(currentPosition.content - positions.content) / this._cachedButtonWidth, 1);\n    return fx.animate(this._$cachedContent, {\n      from: currentPosition,\n      to: positions,\n      easing: SLIDE_MENU_ANIMATION_EASING,\n      duration: SLIDE_MENU_ANIMATION_DURATION * durationTimePart,\n      strategy: \"frame\",\n      draw: function (positions) {\n        that._setPositions(positions);\n      }\n    });\n  },\n  dispose: function () {\n    if (this._menu) {\n      this._menu.$element().remove();\n    }\n\n    if (this._$buttonsContainer) {\n      this._$buttonsContainer.remove();\n    }\n\n    this.callBase.apply(this, arguments);\n  }\n}).include(EditDecoratorMenuHelperMixin));","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/ui/list/ui.list.edit.decorator.switchable.slide.js"],"names":["$","require","eventsEngine","noop","clickEvent","messageLocalization","translator","eventUtils","feedbackEvents","EditDecoratorMenuHelperMixin","registerDecorator","register","SwitchableEditDecorator","fx","themes","ActionSheet","LIST_EDIT_DECORATOR","CLICK_EVENT_NAME","addNamespace","name","ACTIVE_EVENT_NAME","active","SLIDE_MENU_CLASS","SLIDE_MENU_WRAPPER_CLASS","SLIDE_MENU_CONTENT_CLASS","SLIDE_MENU_BUTTONS_CONTAINER_CLASS","SLIDE_MENU_BUTTONS_CLASS","SLIDE_MENU_BUTTON_CLASS","SLIDE_MENU_BUTTON_MENU_CLASS","SLIDE_MENU_BUTTON_DELETE_CLASS","SLIDE_MENU_ANIMATION_DURATION","SLIDE_MENU_ANIMATION_EASING","inherit","_shouldHandleSwipe","_init","callBase","apply","arguments","_$buttonsContainer","addClass","on","_$buttons","appendTo","_renderMenu","_renderDeleteButton","_menuEnabled","menuItems","_menuItems","length","menuItem","_renderMenuButton","text","e","stopPropagation","_fireAction","bind","$menu","_menu","_list","_createComponent","showTitle","items","onItemClick","args","itemData","integrationOptions","$element","$menuButton","format","show","option","action","append","_deleteEnabled","$deleteButton","isMaterial","_deleteItem","_fireMenuAction","_cachedNode","_cancelDeleteReadyItem","modifyElement","config","$itemElement","$slideMenuContent","wrapInner","_getDeleteButtonContainer","handleClick","_","target","closest","_swipeStartHandler","_enablePositioning","_cacheItemData","_setPositions","_getPositions","_swipeUpdateHandler","rtl","_isRtlEnabled","signCorrection","isItemReadyToDelete","_isReadyToDelete","moveJustStarted","_getCurrentPositions","content","_getStartPositions","offset","cancel","_cachedItemWidth","startOffset","_cachedButtonWidth","correctedOffset","percent","Math","abs","buttonsContainer","buttons","startPositions","min","locate","_$cachedContent","left","positions","move","find","outerWidth","width","_minButtonContainerLeftOffset","_swipeEndHandler","endedAtReadyToDelete","readyToDelete","targetOffset","_toggleDeleteReady","stop","_disablePositioning","detach","_animatePrepareDeleteReady","_animateToPositions","_animateForgetDeleteReady","that","currentPosition","durationTimePart","animate","from","to","easing","duration","strategy","draw","dispose","remove","include"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.slide.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar clickEvent = require(\"../../events/click\");\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar translator = require(\"../../animation/translator\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\r\nvar EditDecoratorMenuHelperMixin = require(\"./ui.list.edit.decorator_menu_helper\");\r\nvar registerDecorator = require(\"./ui.list.edit.decorator_registry\").register;\r\nvar SwitchableEditDecorator = require(\"./ui.list.edit.decorator.switchable\");\r\nvar fx = require(\"../../animation/fx\");\r\nvar themes = require(\"../themes\");\r\nvar ActionSheet = require(\"../action_sheet\");\r\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\r\nvar CLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, LIST_EDIT_DECORATOR);\r\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\r\nvar SLIDE_MENU_CLASS = \"dx-list-slide-menu\";\r\nvar SLIDE_MENU_WRAPPER_CLASS = \"dx-list-slide-menu-wrapper\";\r\nvar SLIDE_MENU_CONTENT_CLASS = \"dx-list-slide-menu-content\";\r\nvar SLIDE_MENU_BUTTONS_CONTAINER_CLASS = \"dx-list-slide-menu-buttons-container\";\r\nvar SLIDE_MENU_BUTTONS_CLASS = \"dx-list-slide-menu-buttons\";\r\nvar SLIDE_MENU_BUTTON_CLASS = \"dx-list-slide-menu-button\";\r\nvar SLIDE_MENU_BUTTON_MENU_CLASS = \"dx-list-slide-menu-button-menu\";\r\nvar SLIDE_MENU_BUTTON_DELETE_CLASS = \"dx-list-slide-menu-button-delete\";\r\nvar SLIDE_MENU_ANIMATION_DURATION = 400;\r\nvar SLIDE_MENU_ANIMATION_EASING = \"cubic-bezier(0.075, 0.82, 0.165, 1)\";\r\nregisterDecorator(\"menu\", \"slide\", SwitchableEditDecorator.inherit({\r\n    _shouldHandleSwipe: true,\r\n    _init: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._$buttonsContainer = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CONTAINER_CLASS);\r\n        eventsEngine.on(this._$buttonsContainer, ACTIVE_EVENT_NAME, noop);\r\n        this._$buttons = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CLASS).appendTo(this._$buttonsContainer);\r\n        this._renderMenu();\r\n        this._renderDeleteButton()\r\n    },\r\n    _renderMenu: function() {\r\n        if (!this._menuEnabled()) {\r\n            return\r\n        }\r\n        var menuItems = this._menuItems();\r\n        if (1 === menuItems.length) {\r\n            var menuItem = menuItems[0];\r\n            this._renderMenuButton(menuItem.text, function(e) {\r\n                e.stopPropagation();\r\n                this._fireAction(menuItem)\r\n            }.bind(this))\r\n        } else {\r\n            var $menu = $(\"<div>\").addClass(SLIDE_MENU_CLASS);\r\n            this._menu = this._list._createComponent($menu, ActionSheet, {\r\n                showTitle: false,\r\n                items: menuItems,\r\n                onItemClick: function(args) {\r\n                    this._fireAction(args.itemData)\r\n                }.bind(this),\r\n                integrationOptions: {}\r\n            });\r\n            $menu.appendTo(this._list.$element());\r\n            var $menuButton = this._renderMenuButton(messageLocalization.format(\"dxListEditDecorator-more\"), function(e) {\r\n                e.stopPropagation();\r\n                this._menu.show()\r\n            }.bind(this));\r\n            this._menu.option(\"target\", $menuButton)\r\n        }\r\n    },\r\n    _renderMenuButton: function(text, action) {\r\n        var $menuButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_MENU_CLASS).text(text);\r\n        this._$buttons.append($menuButton);\r\n        eventsEngine.on($menuButton, CLICK_EVENT_NAME, action);\r\n        return $menuButton\r\n    },\r\n    _renderDeleteButton: function() {\r\n        if (!this._deleteEnabled()) {\r\n            return\r\n        }\r\n        var $deleteButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_DELETE_CLASS).text(themes.isMaterial() ? \"\" : messageLocalization.format(\"dxListEditDecorator-delete\"));\r\n        eventsEngine.on($deleteButton, CLICK_EVENT_NAME, function(e) {\r\n            e.stopPropagation();\r\n            this._deleteItem()\r\n        }.bind(this));\r\n        this._$buttons.append($deleteButton)\r\n    },\r\n    _fireAction: function(menuItem) {\r\n        this._fireMenuAction($(this._cachedNode), menuItem.action);\r\n        this._cancelDeleteReadyItem()\r\n    },\r\n    modifyElement: function(config) {\r\n        this.callBase.apply(this, arguments);\r\n        var $itemElement = config.$itemElement;\r\n        $itemElement.addClass(SLIDE_MENU_WRAPPER_CLASS);\r\n        var $slideMenuContent = $(\"<div>\").addClass(SLIDE_MENU_CONTENT_CLASS);\r\n        $itemElement.wrapInner($slideMenuContent)\r\n    },\r\n    _getDeleteButtonContainer: function() {\r\n        return this._$buttonsContainer\r\n    },\r\n    handleClick: function(_, e) {\r\n        if ($(e.target).closest(\".\" + SLIDE_MENU_CONTENT_CLASS).length) {\r\n            return this.callBase.apply(this, arguments)\r\n        }\r\n        return false\r\n    },\r\n    _swipeStartHandler: function($itemElement) {\r\n        this._enablePositioning($itemElement);\r\n        this._cacheItemData($itemElement);\r\n        this._setPositions(this._getPositions(0))\r\n    },\r\n    _swipeUpdateHandler: function($itemElement, args) {\r\n        var rtl = this._isRtlEnabled();\r\n        var signCorrection = rtl ? -1 : 1;\r\n        var isItemReadyToDelete = this._isReadyToDelete($itemElement);\r\n        var moveJustStarted = this._getCurrentPositions().content === this._getStartPositions().content;\r\n        if (moveJustStarted && !isItemReadyToDelete && args.offset * signCorrection > 0) {\r\n            args.cancel = true;\r\n            return\r\n        }\r\n        var offset = this._cachedItemWidth * args.offset;\r\n        var startOffset = isItemReadyToDelete ? -this._cachedButtonWidth * signCorrection : 0;\r\n        var correctedOffset = (offset + startOffset) * signCorrection;\r\n        var percent = correctedOffset < 0 ? Math.abs((offset + startOffset) / this._cachedButtonWidth) : 0;\r\n        this._setPositions(this._getPositions(percent));\r\n        return true\r\n    },\r\n    _getStartPositions: function() {\r\n        var rtl = this._isRtlEnabled();\r\n        var signCorrection = rtl ? -1 : 1;\r\n        return {\r\n            content: 0,\r\n            buttonsContainer: rtl ? -this._cachedButtonWidth : this._cachedItemWidth,\r\n            buttons: -this._cachedButtonWidth * signCorrection\r\n        }\r\n    },\r\n    _getPositions: function(percent) {\r\n        var rtl = this._isRtlEnabled();\r\n        var signCorrection = rtl ? -1 : 1;\r\n        var startPositions = this._getStartPositions();\r\n        return {\r\n            content: startPositions.content - percent * this._cachedButtonWidth * signCorrection,\r\n            buttonsContainer: startPositions.buttonsContainer - Math.min(percent, 1) * this._cachedButtonWidth * signCorrection,\r\n            buttons: startPositions.buttons + Math.min(percent, 1) * this._cachedButtonWidth * signCorrection\r\n        }\r\n    },\r\n    _getCurrentPositions: function() {\r\n        return {\r\n            content: translator.locate(this._$cachedContent).left,\r\n            buttonsContainer: translator.locate(this._$buttonsContainer).left,\r\n            buttons: translator.locate(this._$buttons).left\r\n        }\r\n    },\r\n    _setPositions: function(positions) {\r\n        translator.move(this._$cachedContent, {\r\n            left: positions.content\r\n        });\r\n        translator.move(this._$buttonsContainer, {\r\n            left: positions.buttonsContainer\r\n        });\r\n        translator.move(this._$buttons, {\r\n            left: positions.buttons\r\n        })\r\n    },\r\n    _cacheItemData: function($itemElement) {\r\n        if ($itemElement[0] === this._cachedNode) {\r\n            return\r\n        }\r\n        this._$cachedContent = $itemElement.find(\".\" + SLIDE_MENU_CONTENT_CLASS);\r\n        this._cachedItemWidth = $itemElement.outerWidth();\r\n        this._cachedButtonWidth = this._cachedButtonWidth || this._$buttons.outerWidth();\r\n        this._$buttonsContainer.width(this._cachedButtonWidth);\r\n        if (this._$cachedContent.length) {\r\n            this._cachedNode = $itemElement[0]\r\n        }\r\n    },\r\n    _minButtonContainerLeftOffset: function() {\r\n        return this._cachedItemWidth - this._cachedButtonWidth\r\n    },\r\n    _swipeEndHandler: function($itemElement, args) {\r\n        this._cacheItemData($itemElement);\r\n        var signCorrection = this._isRtlEnabled() ? 1 : -1;\r\n        var offset = this._cachedItemWidth * args.offset;\r\n        var endedAtReadyToDelete = !this._isReadyToDelete($itemElement) && offset * signCorrection > .2 * this._cachedButtonWidth;\r\n        var readyToDelete = args.targetOffset === signCorrection && endedAtReadyToDelete;\r\n        this._toggleDeleteReady($itemElement, readyToDelete);\r\n        return true\r\n    },\r\n    _enablePositioning: function($itemElement) {\r\n        fx.stop(this._$cachedContent, true);\r\n        this.callBase.apply(this, arguments);\r\n        this._$buttonsContainer.appendTo($itemElement)\r\n    },\r\n    _disablePositioning: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._$buttonsContainer.detach()\r\n    },\r\n    _animatePrepareDeleteReady: function() {\r\n        return this._animateToPositions(this._getPositions(1))\r\n    },\r\n    _animateForgetDeleteReady: function($itemElement) {\r\n        this._cacheItemData($itemElement);\r\n        return this._animateToPositions(this._getPositions(0))\r\n    },\r\n    _animateToPositions: function(positions) {\r\n        var that = this;\r\n        var currentPosition = this._getCurrentPositions();\r\n        var durationTimePart = Math.min(Math.abs(currentPosition.content - positions.content) / this._cachedButtonWidth, 1);\r\n        return fx.animate(this._$cachedContent, {\r\n            from: currentPosition,\r\n            to: positions,\r\n            easing: SLIDE_MENU_ANIMATION_EASING,\r\n            duration: SLIDE_MENU_ANIMATION_DURATION * durationTimePart,\r\n            strategy: \"frame\",\r\n            draw: function(positions) {\r\n                that._setPositions(positions)\r\n            }\r\n        })\r\n    },\r\n    dispose: function() {\r\n        if (this._menu) {\r\n            this._menu.$element().remove()\r\n        }\r\n        if (this._$buttonsContainer) {\r\n            this._$buttonsContainer.remove()\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n}).include(EditDecoratorMenuHelperMixin));\r\n"]},"metadata":{},"sourceType":"script"}