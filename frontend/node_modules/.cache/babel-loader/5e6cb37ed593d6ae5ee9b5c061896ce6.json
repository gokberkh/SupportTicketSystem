{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.virtual_columns.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.virtual_columns_core\");\n\nvar DEFAULT_COLUMN_WIDTH = 50;\nvar VirtualScrollingRowsViewExtender = {\n  _resizeCore: function () {\n    this.callBase.apply(this, arguments);\n\n    this._columnsController.resize();\n  },\n  _handleScroll: function (e) {\n    var that = this;\n    var scrollable = this.getScrollable();\n    var left = e.scrollOffset.left;\n    that.callBase.apply(that, arguments);\n\n    if (that.option(\"rtlEnabled\") && scrollable) {\n      left = scrollable.$content().width() - scrollable.$element().width() - left;\n    }\n\n    that._columnsController.setScrollPosition(left);\n  }\n};\nvar HeaderFooterViewExtender = {\n  _renderCore: function () {\n    var that = this;\n    var scrollLeft = that._scrollLeft;\n    that.callBase.apply(that, arguments);\n\n    if (that._columnsController.isVirtualMode() && scrollLeft >= 0) {\n      that._scrollLeft = 0;\n      that.scrollTo({\n        left: scrollLeft\n      });\n    }\n  }\n};\n\nvar ColumnsControllerExtender = function () {\n  var getWidths = function (columns) {\n    return columns.map(function (column) {\n      return column.visibleWidth || parseFloat(column.width) || DEFAULT_COLUMN_WIDTH;\n    });\n  };\n\n  var members = {\n    init: function () {\n      var that = this;\n      that.callBase();\n      that._beginPageIndex = 0;\n      that._endPageIndex = 0;\n      that._position = 0;\n      that._virtualVisibleColumns = {};\n    },\n    resetColumnsCache: function () {\n      this.callBase();\n      this._virtualVisibleColumns = {};\n    },\n    getBeginPageIndex: function (position) {\n      var visibleColumns = this.getVisibleColumns(void 0, true);\n      var widths = getWidths(visibleColumns);\n      var currentPosition = 0;\n\n      for (var index = 0; index < widths.length; index++) {\n        if (currentPosition >= position) {\n          return Math.floor(index / this.getColumnPageSize());\n        }\n\n        currentPosition += widths[index];\n      }\n\n      return 0;\n    },\n    getTotalWidth: function () {\n      var width = this.option(\"width\");\n\n      if (\"number\" === typeof width) {\n        return width;\n      }\n\n      return this.getController(\"resizing\")._lastWidth || this.component.$element().outerWidth();\n    },\n    getEndPageIndex: function (position) {\n      var visibleColumns = this.getVisibleColumns(void 0, true);\n      var widths = getWidths(visibleColumns);\n      var currentPosition = 0;\n      position += this.getTotalWidth();\n\n      for (var index = 0; index < widths.length; index++) {\n        if (currentPosition >= position) {\n          return Math.ceil(index / this.getColumnPageSize());\n        }\n\n        currentPosition += widths[index];\n      }\n\n      return Math.ceil(widths.length / this.getColumnPageSize());\n    },\n    getColumnPageSize: function () {\n      return this.option(\"scrolling.columnPageSize\");\n    },\n    _fireColumnsChanged: function () {\n      var date = new Date();\n      this.columnsChanged.fire({\n        optionNames: {\n          all: true,\n          length: 1\n        },\n        changeTypes: {\n          columns: true,\n          length: 1\n        }\n      });\n      this._renderTime = new Date() - date;\n    },\n    setScrollPosition: function (position) {\n      var that = this;\n      var renderingThreshold = that.option(\"scrolling.columnRenderingThreshold\");\n\n      if (that._renderTime > renderingThreshold) {\n        clearTimeout(that._changedTimeout);\n        that._changedTimeout = setTimeout(function () {\n          that._setScrollPositionCore(position);\n        }, that.option(\"scrolling.timeout\"));\n      } else {\n        that._setScrollPositionCore(position);\n      }\n    },\n    isVirtualMode: function () {\n      return (0, _window.hasWindow)() && \"virtual\" === this.option(\"scrolling.columnRenderingMode\");\n    },\n    resize: function () {\n      this._setScrollPositionCore(this._position);\n    },\n    _setScrollPositionCore: function (position) {\n      var that = this;\n\n      if (that.isVirtualMode()) {\n        var beginPageIndex = that.getBeginPageIndex(position);\n        var endPageIndex = that.getEndPageIndex(position);\n        var needColumnsChanged = position < that._position ? that._beginPageIndex > beginPageIndex : that._endPageIndex < endPageIndex;\n        that._position = position;\n\n        if (needColumnsChanged) {\n          that._beginPageIndex = beginPageIndex;\n          that._endPageIndex = endPageIndex;\n\n          that._fireColumnsChanged();\n        }\n      }\n    },\n    getFixedColumns: function (rowIndex, isBase) {\n      var fixedColumns = this.callBase(rowIndex);\n\n      if (this.isVirtualMode() && !isBase && fixedColumns.length) {\n        var transparentColumnIndex = fixedColumns.map(function (c) {\n          return c.command;\n        }).indexOf(\"transparent\");\n        fixedColumns[transparentColumnIndex].colspan = this.getVisibleColumns().length - this.callBase().length + 1;\n        return fixedColumns;\n      }\n\n      return fixedColumns;\n    },\n    getVisibleColumns: function (rowIndex, isBase) {\n      if (isBase || !this.isVirtualMode()) {\n        return this.callBase(rowIndex);\n      }\n\n      if (!this._beginPageIndex && !this._endPageIndex) {\n        this._beginPageIndex = this.getBeginPageIndex(this._position);\n        this._endPageIndex = this.getEndPageIndex(this._position);\n      }\n\n      var beginPageIndex = this._beginPageIndex;\n      var endPageIndex = this._endPageIndex;\n      var visibleColumnsHash = rowIndex + \"-\" + beginPageIndex + \"-\" + endPageIndex;\n\n      if (this._virtualVisibleColumns[visibleColumnsHash]) {\n        return this._virtualVisibleColumns[visibleColumnsHash];\n      }\n\n      var visibleColumns = this.callBase();\n      var rowCount = this.getRowCount();\n      var pageSize = this.getColumnPageSize();\n      var startIndex = beginPageIndex * pageSize;\n      var endIndex = endPageIndex * pageSize;\n      var fixedColumns = this.getFixedColumns(void 0, true);\n      var transparentColumnIndex = fixedColumns.map(function (c) {\n        return c.command;\n      }).indexOf(\"transparent\");\n      var beginFixedColumnCount = fixedColumns.length ? transparentColumnIndex : 0;\n      var beginFixedColumns = visibleColumns.slice(0, beginFixedColumnCount);\n      var beginColumns = visibleColumns.slice(beginFixedColumnCount, startIndex);\n      var beginWidth = getWidths(beginColumns).reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      if (!beginWidth) {\n        startIndex = 0;\n      }\n\n      var endFixedColumnCount = fixedColumns.length ? fixedColumns.length - transparentColumnIndex - 1 : 0;\n      var endFixedColumns = visibleColumns.slice(visibleColumns.length - endFixedColumnCount);\n      var endColumns = visibleColumns.slice(endIndex, visibleColumns.length - endFixedColumnCount);\n      var endWidth = getWidths(endColumns).reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      if (!endWidth) {\n        endIndex = visibleColumns.length;\n      }\n\n      if (rowCount > 1 && \"number\" === typeof rowIndex) {\n        var columnsInfo = [];\n\n        for (var i = 0; i < rowCount; i++) {\n          columnsInfo.push(this.callBase(i));\n        }\n\n        beginFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, 0, beginFixedColumns.length)[rowIndex] || [];\n        endFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, visibleColumns.length - endFixedColumns.length, visibleColumns.length)[rowIndex] || [];\n        visibleColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, startIndex, endIndex)[rowIndex] || [];\n      } else {\n        visibleColumns = visibleColumns.slice(startIndex, endIndex);\n      }\n\n      if (beginWidth) {\n        visibleColumns.unshift({\n          command: \"virtual\",\n          width: beginWidth\n        });\n        visibleColumns = beginFixedColumns.concat(visibleColumns);\n      }\n\n      if (endWidth) {\n        visibleColumns.push({\n          command: \"virtual\",\n          width: endWidth\n        });\n        visibleColumns = visibleColumns.concat(endFixedColumns);\n      }\n\n      this._virtualVisibleColumns[visibleColumnsHash] = visibleColumns;\n      return visibleColumns;\n    },\n    dispose: function () {\n      clearTimeout(this._changedTimeout);\n      this.callBase.apply(this, arguments);\n    }\n  };\n  return members;\n}();\n\nmodule.exports = {\n  defaultOptions: function () {\n    return {\n      scrolling: {\n        columnRenderingMode: \"standard\",\n        columnPageSize: 5,\n        columnRenderingThreshold: 300\n      }\n    };\n  },\n  extenders: {\n    controllers: {\n      columns: ColumnsControllerExtender\n    },\n    views: {\n      columnHeadersView: HeaderFooterViewExtender,\n      footerView: HeaderFooterViewExtender,\n      rowsView: VirtualScrollingRowsViewExtender\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/ui/grid_core/ui.grid_core.virtual_columns.js"],"names":["_window","require","_uiGrid_core","DEFAULT_COLUMN_WIDTH","VirtualScrollingRowsViewExtender","_resizeCore","callBase","apply","arguments","_columnsController","resize","_handleScroll","e","that","scrollable","getScrollable","left","scrollOffset","option","$content","width","$element","setScrollPosition","HeaderFooterViewExtender","_renderCore","scrollLeft","_scrollLeft","isVirtualMode","scrollTo","ColumnsControllerExtender","getWidths","columns","map","column","visibleWidth","parseFloat","members","init","_beginPageIndex","_endPageIndex","_position","_virtualVisibleColumns","resetColumnsCache","getBeginPageIndex","position","visibleColumns","getVisibleColumns","widths","currentPosition","index","length","Math","floor","getColumnPageSize","getTotalWidth","getController","_lastWidth","component","outerWidth","getEndPageIndex","ceil","_fireColumnsChanged","date","Date","columnsChanged","fire","optionNames","all","changeTypes","_renderTime","renderingThreshold","clearTimeout","_changedTimeout","setTimeout","_setScrollPositionCore","hasWindow","beginPageIndex","endPageIndex","needColumnsChanged","getFixedColumns","rowIndex","isBase","fixedColumns","transparentColumnIndex","c","command","indexOf","colspan","visibleColumnsHash","rowCount","getRowCount","pageSize","startIndex","endIndex","beginFixedColumnCount","beginFixedColumns","slice","beginColumns","beginWidth","reduce","a","b","endFixedColumnCount","endFixedColumns","endColumns","endWidth","columnsInfo","i","push","createColumnsInfo","unshift","concat","dispose","module","exports","defaultOptions","scrolling","columnRenderingMode","columnPageSize","columnRenderingThreshold","extenders","controllers","views","columnHeadersView","footerView","rowsView"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.virtual_columns.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.virtual_columns_core\");\r\nvar DEFAULT_COLUMN_WIDTH = 50;\r\nvar VirtualScrollingRowsViewExtender = {\r\n    _resizeCore: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._columnsController.resize()\r\n    },\r\n    _handleScroll: function(e) {\r\n        var that = this;\r\n        var scrollable = this.getScrollable();\r\n        var left = e.scrollOffset.left;\r\n        that.callBase.apply(that, arguments);\r\n        if (that.option(\"rtlEnabled\") && scrollable) {\r\n            left = scrollable.$content().width() - scrollable.$element().width() - left\r\n        }\r\n        that._columnsController.setScrollPosition(left)\r\n    }\r\n};\r\nvar HeaderFooterViewExtender = {\r\n    _renderCore: function() {\r\n        var that = this;\r\n        var scrollLeft = that._scrollLeft;\r\n        that.callBase.apply(that, arguments);\r\n        if (that._columnsController.isVirtualMode() && scrollLeft >= 0) {\r\n            that._scrollLeft = 0;\r\n            that.scrollTo({\r\n                left: scrollLeft\r\n            })\r\n        }\r\n    }\r\n};\r\nvar ColumnsControllerExtender = function() {\r\n    var getWidths = function(columns) {\r\n        return columns.map(function(column) {\r\n            return column.visibleWidth || parseFloat(column.width) || DEFAULT_COLUMN_WIDTH\r\n        })\r\n    };\r\n    var members = {\r\n        init: function() {\r\n            var that = this;\r\n            that.callBase();\r\n            that._beginPageIndex = 0;\r\n            that._endPageIndex = 0;\r\n            that._position = 0;\r\n            that._virtualVisibleColumns = {}\r\n        },\r\n        resetColumnsCache: function() {\r\n            this.callBase();\r\n            this._virtualVisibleColumns = {}\r\n        },\r\n        getBeginPageIndex: function(position) {\r\n            var visibleColumns = this.getVisibleColumns(void 0, true);\r\n            var widths = getWidths(visibleColumns);\r\n            var currentPosition = 0;\r\n            for (var index = 0; index < widths.length; index++) {\r\n                if (currentPosition >= position) {\r\n                    return Math.floor(index / this.getColumnPageSize())\r\n                }\r\n                currentPosition += widths[index]\r\n            }\r\n            return 0\r\n        },\r\n        getTotalWidth: function() {\r\n            var width = this.option(\"width\");\r\n            if (\"number\" === typeof width) {\r\n                return width\r\n            }\r\n            return this.getController(\"resizing\")._lastWidth || this.component.$element().outerWidth()\r\n        },\r\n        getEndPageIndex: function(position) {\r\n            var visibleColumns = this.getVisibleColumns(void 0, true);\r\n            var widths = getWidths(visibleColumns);\r\n            var currentPosition = 0;\r\n            position += this.getTotalWidth();\r\n            for (var index = 0; index < widths.length; index++) {\r\n                if (currentPosition >= position) {\r\n                    return Math.ceil(index / this.getColumnPageSize())\r\n                }\r\n                currentPosition += widths[index]\r\n            }\r\n            return Math.ceil(widths.length / this.getColumnPageSize())\r\n        },\r\n        getColumnPageSize: function() {\r\n            return this.option(\"scrolling.columnPageSize\")\r\n        },\r\n        _fireColumnsChanged: function() {\r\n            var date = new Date;\r\n            this.columnsChanged.fire({\r\n                optionNames: {\r\n                    all: true,\r\n                    length: 1\r\n                },\r\n                changeTypes: {\r\n                    columns: true,\r\n                    length: 1\r\n                }\r\n            });\r\n            this._renderTime = new Date - date\r\n        },\r\n        setScrollPosition: function(position) {\r\n            var that = this;\r\n            var renderingThreshold = that.option(\"scrolling.columnRenderingThreshold\");\r\n            if (that._renderTime > renderingThreshold) {\r\n                clearTimeout(that._changedTimeout);\r\n                that._changedTimeout = setTimeout(function() {\r\n                    that._setScrollPositionCore(position)\r\n                }, that.option(\"scrolling.timeout\"))\r\n            } else {\r\n                that._setScrollPositionCore(position)\r\n            }\r\n        },\r\n        isVirtualMode: function() {\r\n            return (0, _window.hasWindow)() && \"virtual\" === this.option(\"scrolling.columnRenderingMode\")\r\n        },\r\n        resize: function() {\r\n            this._setScrollPositionCore(this._position)\r\n        },\r\n        _setScrollPositionCore: function(position) {\r\n            var that = this;\r\n            if (that.isVirtualMode()) {\r\n                var beginPageIndex = that.getBeginPageIndex(position);\r\n                var endPageIndex = that.getEndPageIndex(position);\r\n                var needColumnsChanged = position < that._position ? that._beginPageIndex > beginPageIndex : that._endPageIndex < endPageIndex;\r\n                that._position = position;\r\n                if (needColumnsChanged) {\r\n                    that._beginPageIndex = beginPageIndex;\r\n                    that._endPageIndex = endPageIndex;\r\n                    that._fireColumnsChanged()\r\n                }\r\n            }\r\n        },\r\n        getFixedColumns: function(rowIndex, isBase) {\r\n            var fixedColumns = this.callBase(rowIndex);\r\n            if (this.isVirtualMode() && !isBase && fixedColumns.length) {\r\n                var transparentColumnIndex = fixedColumns.map(function(c) {\r\n                    return c.command\r\n                }).indexOf(\"transparent\");\r\n                fixedColumns[transparentColumnIndex].colspan = this.getVisibleColumns().length - this.callBase().length + 1;\r\n                return fixedColumns\r\n            }\r\n            return fixedColumns\r\n        },\r\n        getVisibleColumns: function(rowIndex, isBase) {\r\n            if (isBase || !this.isVirtualMode()) {\r\n                return this.callBase(rowIndex)\r\n            }\r\n            if (!this._beginPageIndex && !this._endPageIndex) {\r\n                this._beginPageIndex = this.getBeginPageIndex(this._position);\r\n                this._endPageIndex = this.getEndPageIndex(this._position)\r\n            }\r\n            var beginPageIndex = this._beginPageIndex;\r\n            var endPageIndex = this._endPageIndex;\r\n            var visibleColumnsHash = rowIndex + \"-\" + beginPageIndex + \"-\" + endPageIndex;\r\n            if (this._virtualVisibleColumns[visibleColumnsHash]) {\r\n                return this._virtualVisibleColumns[visibleColumnsHash]\r\n            }\r\n            var visibleColumns = this.callBase();\r\n            var rowCount = this.getRowCount();\r\n            var pageSize = this.getColumnPageSize();\r\n            var startIndex = beginPageIndex * pageSize;\r\n            var endIndex = endPageIndex * pageSize;\r\n            var fixedColumns = this.getFixedColumns(void 0, true);\r\n            var transparentColumnIndex = fixedColumns.map(function(c) {\r\n                return c.command\r\n            }).indexOf(\"transparent\");\r\n            var beginFixedColumnCount = fixedColumns.length ? transparentColumnIndex : 0;\r\n            var beginFixedColumns = visibleColumns.slice(0, beginFixedColumnCount);\r\n            var beginColumns = visibleColumns.slice(beginFixedColumnCount, startIndex);\r\n            var beginWidth = getWidths(beginColumns).reduce(function(a, b) {\r\n                return a + b\r\n            }, 0);\r\n            if (!beginWidth) {\r\n                startIndex = 0\r\n            }\r\n            var endFixedColumnCount = fixedColumns.length ? fixedColumns.length - transparentColumnIndex - 1 : 0;\r\n            var endFixedColumns = visibleColumns.slice(visibleColumns.length - endFixedColumnCount);\r\n            var endColumns = visibleColumns.slice(endIndex, visibleColumns.length - endFixedColumnCount);\r\n            var endWidth = getWidths(endColumns).reduce(function(a, b) {\r\n                return a + b\r\n            }, 0);\r\n            if (!endWidth) {\r\n                endIndex = visibleColumns.length\r\n            }\r\n            if (rowCount > 1 && \"number\" === typeof rowIndex) {\r\n                var columnsInfo = [];\r\n                for (var i = 0; i < rowCount; i++) {\r\n                    columnsInfo.push(this.callBase(i))\r\n                }\r\n                beginFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, 0, beginFixedColumns.length)[rowIndex] || [];\r\n                endFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, visibleColumns.length - endFixedColumns.length, visibleColumns.length)[rowIndex] || [];\r\n                visibleColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, startIndex, endIndex)[rowIndex] || []\r\n            } else {\r\n                visibleColumns = visibleColumns.slice(startIndex, endIndex)\r\n            }\r\n            if (beginWidth) {\r\n                visibleColumns.unshift({\r\n                    command: \"virtual\",\r\n                    width: beginWidth\r\n                });\r\n                visibleColumns = beginFixedColumns.concat(visibleColumns)\r\n            }\r\n            if (endWidth) {\r\n                visibleColumns.push({\r\n                    command: \"virtual\",\r\n                    width: endWidth\r\n                });\r\n                visibleColumns = visibleColumns.concat(endFixedColumns)\r\n            }\r\n            this._virtualVisibleColumns[visibleColumnsHash] = visibleColumns;\r\n            return visibleColumns\r\n        },\r\n        dispose: function() {\r\n            clearTimeout(this._changedTimeout);\r\n            this.callBase.apply(this, arguments)\r\n        }\r\n    };\r\n    return members\r\n}();\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            scrolling: {\r\n                columnRenderingMode: \"standard\",\r\n                columnPageSize: 5,\r\n                columnRenderingThreshold: 300\r\n            }\r\n        }\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            columns: ColumnsControllerExtender\r\n        },\r\n        views: {\r\n            columnHeadersView: HeaderFooterViewExtender,\r\n            footerView: HeaderFooterViewExtender,\r\n            rowsView: VirtualScrollingRowsViewExtender\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}